# AudioScribe Pro: 下一阶段开发路线图 (Roadmap)

本文档汇总了 AudioScribe Pro 从“本地高效工具”向“社群化云服务”转型的核心计划，并新增了网络资源抓取模块，旨在大幅提升内容创作者和知识管理者的工作效率。

---

## 模块一：多用户在线化与数据隔离 (Multi-Tenant Cloud)

将项目改造为面向社群的在线服务，核心在于身份认证、数据权限隔离以及云端基础设施的迁移。

### 1.1 隔离机制
*   **用户与数据隔离 (DB)**：在 `schema.prisma` 中引入 `User` 模型，所有项目 (`Project`) 强制绑定 `userId`。后端 API 自动追加用户过滤，确保数据物理安全。
*   **资产隔离 (Storage)**：全面接入**阿里云 OSS**。采用 `uploads/{userId}/{projectId}/` 路径结构，并在前端使用预签名 URL 实现安全直传。

### 1.2 实施步骤
1.  **基础设施云化**：迁移至云端 PostgreSQL (如 Supabase)，集成 Clerk 或自定义 JWT 鉴权系统。
2.  **后端 Scoping 改造**：重构控制层逻辑，确保所有增删改查操作均受限在 `req.user.id` 域内。
3.  **限额系统 (Quotas)**：根据用户等级限制并发数、存储空间及 AI 额度调用。

---

## 模块二：网络音视频资源转录 (Web Resource Extraction)

新增模块，支持直接通过链接（如 YouTube、Bilibili、小鹅通等）提取音频并进入转写流，无需手动下载。

### 2.1 技术方案
*   **引擎集成**：利用 `yt-dlp` 后台引擎支持全球数千个站点的媒体解析。
*   **提取逻辑**：
    1.  **解析 URL**：后台异步调用解析脚本获取最高质量/最匹配的音频流。
    2.  **流式下载**：直接将音频流下载至隔离的 `projectDir`。
    3.  **接入流水线**：下载完成后自动触发原有的压缩、VAD 切片及转录流程。

### 2.2 核心功能
- [ ] **多平台支持**：支持 Bilibili、YouTube、小鹅通、播客 URL。
- [ ] **异步任务显示**：前端增加“链接导入”入口，显示下载进度条。
- [ ] **元数据保留**：自动抓取视频标题、封面及作者作为档案元数据。

---

## 3. 工作量评估与周期计划

| 核心模块 | 技术要点 | 预计周期 | 优先级 |
| :--- | :--- | :--- | :--- |
| **Auth & 数据隔离** | 用户系统、DB Scoping、JWT 鉴权 | 5-7 天 | **P0 (最核心)** |
| **云存储迁移** | 阿里云 OSS 集成、旧文件清理策略 | 3-4 天 | **P1** |
| **网络资源抓取** | `yt-dlp` 集成、异步下载队列、前端导入 UI | 4-5 天 | **P1** |
| **监控与限额** | API 成本控制、用户资源消耗监控 | 2-3 天 | **P2** |

> [!TIP]
> **开发建议**：建议先完成模块一的“数据库 & 鉴权”基础，再在云化平台上构建模块二的集成能力，以确保资源归宿从一开始就是清晰的。
